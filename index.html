<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="//code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script type="text/javascript" src="locCallClass.js"></script>
</head>
<body>
<style>
    .highlight {
        background-color: #ffffcc;
    }
</style>
<script>
    $( document ).ready(function() {

        //clear the floor map
        $('#floor-map-container').empty();


        loc = new locCallClass();

        var richterStacks = [

            { "id": "4.A1.e", "start": "A",     "end": "BE9999 .Z9" },
            { "id": "9.A1.e", "start": "BF",    "end": "BF311.0" },
            { "id": "7.A1.e", "start": "BF311.P",    "end": "BZ9999 .Z9" },
            { "id": "7.A1.e", "start": "C",     "end": "CZ9999 .Z9" },
            { "id": "7.A1.e", "start": "D",     "end": "DZ9999 .Z9" },
            { "id": "7.A1.e", "start": "E",     "end": "EZ9999 .Z9" },
            { "id": "7.A1.e", "start": "F",     "end": "F2199" },
            { "id": "6.A1.e", "start": "F2200",      "end": "FZ" },
            { "id": "6.A1.e", "start": "G",     "end": "GZ9999 .Z9" },
            { "id": "6.A1.e", "start": "H",     "end": "HZ9999 .Z9" },
            { "id": "6.A1.e", "start": "J",     "end": "JV9999 .Z9" },
            { "id": "5.A1.e", "start": "JW",     "end": "JZ9999 .Z9" },
            { "id": "5.A1.e", "start": "K",     "end": "KZ9999 .Z9" },
            { "id": "5.A1.e", "start": "L",     "end": "MZ9999 .Z9" },
            { "id": "5.A1.e", "start": "N",     "end": "OZ9999 .Z9" },
            { "id": "5.A1.e", "start": "P0000",      "end": "PQ7297 .Z9" },
            { "id": "4.A1.e", "start": "PQ7928", "end": "PZ9999 .Z9" },
            { "id": "4.A1.e", "start": "Q",     "end": "QG9999 .Z9" },
            { "id": "9.A1.e", "start": "QH",    "end": "QZ9999 .Z9" },
            { "id": "9.A1.e", "start": "R",     "end": "RZ9999 .Z9" },
            { "id": "9.A1.e", "start": "S",     "end": "SZ9999 .Z9" },
            { "id": "9.A1.e", "start": "T",     "end": "TZ9999 .Z9" },
            { "id": "9.A1.e", "start": "U",     "end": "UZ9999 .Z9" },
            { "id": "9.A1.e", "start": "V",     "end": "YZ9999 .Z9" },
            { "id": "7.A1.e", "start": "Z",     "end": "ZZ9999 .Z9" }

        ];



        for(var i = 0; i < richterStacks.length; i++) {

            var rowNumber = i + 1;
            var id = richterStacks[i].id;
            var start = richterStacks[i].start;
            var end = richterStacks[i].end;

            var splitId = richterStacks[i].id.split('.'); // id generally looks like "5.G47.w"
            var floor = splitId[0];

            var item = '<tr id="row_' + rowNumber + '"><td>' + start + '</td><td>' + end + '</td><td>' + floor + '</td></tr>';
            $('#stackmap').append(item);

        }



        $('#check').on('click', function () {

            //clear the floor map
            $('#floor-map-container').empty();

            //clear row highlight
            $('tr').removeClass('highlight');

            var callnumber = $('#callnumber').val();

            for(var i = 0; i < richterStacks.length; i++) {

                var rowNumber = i + 1;
                var id = richterStacks[i].id;
                var start = richterStacks[i].start;
                var end = richterStacks[i].end;

                if(loc.isBetween(start, end, callnumber) == true) {

                    var splitId = id.split('.'); // id generally looks like "5.G47.w"
                    var floor = splitId[0];
                    var imgUrl = 'maps/' + floor + '_floor.png'

                    $('#floor-map-container').html("<img src='" + imgUrl + "' alt='description' />");

                    $('#row_' + rowNumber).addClass('highlight');
                }

            }

            $('#result').html('floor ' + floor);
        });





    });
</script>

<div class="container">

    <div class="row">
        <div class="col-lg-12">
            <h3>Richter Floor Map Index</h3>
            <input type="text" id="callnumber" name="callnumber" /> <button id="check" name="check">Check</button>
            <div id="result"></div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-3">
            <table class="table table-striped" id="stackmap">
                <tr>
                    <th>Start</th>
                    <th>End</th>
                    <th>Floor</th>
                </tr>
            </table>
        </div>

        <div class="col-lg-9">
            <span id="floor-map-container">
                <img src="maps/4_floor.png" />
            </span>

        </div>

    </div>

</div>

</body>
</html>